machine:
  services:
    - docker

test:
  override:
    - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
    - docker build -f dockerfiles/Dockerfile.ga -t rranshous/wog_ga .
    - docker build -f dockerfiles/Dockerfile.player -t rranshous/wog_player .
    - docker build -f dockerfiles/Dockerfile.scoreboard_viewer -t rranshous/wog_scoreboard_viewer .
    - docker build -f dockerfiles/Dockerfile.tournament_server -t rranshous/wog_tournament_server .
    - docker build -f dockerfiles/Dockerfile.tournament -t rranshous/wog_tournament .
    - docker build -f dockerfiles/Dockerfile.web_designer -t rranshous/wog_web_designer .

deployment:
  hub:
    branch: master
    commands:
      - docker push dockerfiles/rranshous/wog_ga
      - docker push dockerfiles/rranshous/wog_player
      - docker push dockerfiles/rranshous/wog_scoreboard_viewer
      - docker push dockerfiles/rranshous/wog_tournament_server
      - docker push dockerfiles/rranshous/wog_tournament
      - docker push dockerfiles/rranshous/wog_web_designer
